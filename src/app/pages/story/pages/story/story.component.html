<app-hexagon-map [id]="'header'"
                 [interactiveEnabled]=false
                 [scrollZoomEnabled]=false
                 [results]="['isochrones-all-15']"
                 [aggregateProperty]="'mean_spatial_distance_15min'"
                 [height]="'100vh'"></app-hexagon-map>
<app-landing-overlay></app-landing-overlay>
<mat-toolbar #toolbar [ngClass]="{'sticky-header': toolbarSticky }">
  <button mat-button *ngFor="let sectionHeader of sectionHeaders" (click)="scrollToElement(sectionHeader.id)">
    {{ sectionHeader.title }}
  </button>
  <button *ngIf="isDev" mat-button color="accent" routerLink="experiments">
    Experimente
  </button>
</mat-toolbar>

<div class="story-container" [ngClass]="{'sticky-container': toolbarSticky }">

  <app-section-header #background id="background"
                      title="Urbane Mobilität Hintergründe"></app-section-header>
  <ng-container>
    <app-section [chapters]="['mobilitaetsgesetz']"></app-section>
    <app-section [chapters]="['mobilitaetsgesetz-kritik']"></app-section>
    <app-section [chapters]="['mobilitaet-verstehen']"></app-section>
  </ng-container>
  <img id="rosenthaler_platz_img" src="assets/img/rosenthaler_platz.jpg" alt="Rosenthaler Platz beim Sonnenuntergang">

</div>

<app-quote [title]="'Kennt ihr Deutschland?'"
           [textLines]="[
            'Im Süden die Berge',
            'Im Norden das Meer',
            'Und dazwischen:',
            'Teer.',
            'Aber wirklich nur Teer?',
            'Es gibt doch noch mehr!',
            'Ja, genau.',
            'Stau.'
            ]"
           [author]="'Marc-Uwe Kling: Die Känguru Chroniken'"></app-quote>

<div class="story-container">
  <app-section-header #understanding id="understanding" title="Urbane Mobilität verstehen"></app-section-header>
  <app-section [chapters]="['verstehen-intro']"></app-section>
  <ng-container>
    <div class="text-container">
      <app-section [height]="'500px'" [chapters]="['lebensraeume']"></app-section>
      <app-section [height]="'500px'" [chapters]="['arbeitsraeume']"></app-section>
      <app-section [height]="'500px'" [chapters]="['strassen-infrastruktur']"></app-section>
      <app-speed-graph [speedTimeTitle]="'Durchschnittsgeschwindigkeit auf Berliner Straßen'"
                       [weekdayColor]="'#3cba9f'"
                       [weekendColor]="'#ba3c9f'"
                       [labelWeekday]="'Wochentag'"
                       [labelWeekend]="'Wochenende'"></app-speed-graph>
      <app-section [height]="'500px'" [chapters]="['fahrrad-infrastruktur']"></app-section>
      <app-section [height]="'500px'" [chapters]="['oepnv']"></app-section>
    </div>
    <div class="map-container">
      <app-map [id]="'map-understanding'"
               [style]="mapBoxStyleEnum.LIGHT_V10"
               [zoom]="11"
               [interactiveEnabled]=false
               [boundingBox]="boundingBoxEnum.BERLIN"
               [results]="['allowed_car_speed']">
      </app-map>
    </div>
  </ng-container>
</div>

<div class="story-container">
  <app-section-header #visibility id="visibility" title="Mobilität in der Stadt sichtbar machen"></app-section-header>
  <app-section [chapters]="['visibility-isochrones']"></app-section>
  <ng-container>
    <div class="text-container-fixed">
      <app-section [height]="mapHeight" [chapters]="['visibility-isochrones']"></app-section>
    </div>
    <div class="text-container">
      <app-section *ngFor="let section of sectionsVisibility"
                   [height]="'10vh'"
                   [chapters]="section.chapters"
                   [layers]="section.layers"
                   (sectionInViewportEventEmitter)="onLayerMarkerEventTriggered('visibility', $event)"></app-section>
    </div>
    <div class="map-container">
      <app-map [id]="'map-visibility'"
               [height]="mapHeight"
               [style]="mapBoxStyleEnum.DARK_V10"
               [zoom]="12"
               [center]="placeEnum.FOM"
               [interactiveEnabled]=false
               [initialOpacity]="0"
               [opacities]="opacitiesVisibility"
               [results]="resultsVisibility">
      </app-map>
    </div>
  </ng-container>
</div>

<app-quote [textLines]="['Frühschicht schweigt, jeder bleibt für sich', 'Frust kommt auf, denn der Bus kommt nicht']"
           [author]="'Peter Fox: Schwarz zu Blau'"></app-quote>

<div class="story-container">
  <app-section-header #problems id="problems" title="Probleme in der Infrastruktur erkennnen"></app-section-header>
  <ng-container>
    <div class="text-container">
      <app-section *ngFor="let section of sectionsProblems"
                   [height]="mapHeight"
                   [chapters]="section.chapters"
                   [layers]="section.layers"
                   (sectionInViewportEventEmitter)="onLayerMarkerEventTriggered('problems', $event)"></app-section>
    </div>
    <div class="map-container">
      <app-hexagon-map [id]="'map-problems'"
                       [height]="mapHeight"
                       [style]="mapBoxStyleEnum.DARK_V10"
                       [zoom]="9"
                       [boundingBox]="boundingBoxEnum.BERLIN"
                       [interactiveEnabled]=false
                       [initialOpacity]="0"
                       [opacities]="opacitiesProblems"
                       [results]="resultsProblems"
                       [aggregateProperty]="'mean_spatial_distance_15min'">
      </app-hexagon-map>
    </div>
  </ng-container>
</div>

<div class="story-container">
  <app-section-header #whitespots id="whitespots"
                      title="Wichtige White Spots"></app-section-header>
  <app-section [chapters]="['whitespots-auto']"></app-section>
  <app-hexagon-map class="full-width"
                   [id]="'map-summary'"
                   [style]="mapBoxStyleEnum.DARK_V10"
                   [zoom]="11"
                   [boundingBox]="boundingBoxEnum.BERLIN"
                   [interactiveEnabled]=false
                   [results]="['isochrones-all-15']"
                   [aggregateProperty]="'mean_spatial_distance_15min'"></app-hexagon-map>
</div>

<app-footer [sectionHeaders]="sectionHeaders"></app-footer>
